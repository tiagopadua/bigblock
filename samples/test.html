<!DOCTYPE html>
<html>
    <meta charset="utf-8">
    <head>
        <title>THREE.js test</title>
    <style>
        body {
            margin: 0;
        }
    </style>
    </head>
    <body>
        <script src="http://threejs.org/build/three.min.js"></script>
        <script src="../build/bigblock.min.js"></script>
<script type="text/javascript">

var width = window.innerWidth,
    height = window.innerHeight,
    clock = new THREE.Clock(),
    scene,
    camera,
    renderer,
    ambientLight,
    directionalLight,
    loader,
    obj = new THREE.Object3D();
   
scene = new THREE.Scene();

camera = new THREE.PerspectiveCamera(40, width / height, 1, 1000);
camera.position.set(0, 1, 5);

renderer = new THREE.WebGLRenderer({antialias: true});
renderer.setSize(width, height);

document.body.appendChild(renderer.domElement);

ambientLight = new THREE.AmbientLight(0xffffff);
scene.add(ambientLight);

directionalLight = new THREE.DirectionalLight(0xffffff);
directionalLight.position.set(0, 1, 0);
scene.add(directionalLight);

scene.add(new THREE.GridHelper(10, 1));

loader = new THREE.JSONLoader();
loader.load('models/untitled.json', function(geometry, materials) {
    window.x = geometry;
    
    materials.forEach(function(mat) {
        mat.skinning = true;
    });

    cube = new THREE.SkinnedMesh(geometry, new THREE.MeshFaceMaterial(materials));
    var anim = new THREE.Animation(cube, geometry.animations[0], THREE.AnimationHandler.CATMULLROM);
    scene.add(cube);
    anim.play();
    

    (function renderLoop() {
        //requestAnimationFrame(renderLoop);
        var delta = clock.getDelta();
        THREE.AnimationHandler.update(delta);
        renderer.render(scene, camera);
    })();
});

/*
var geometry = new THREE.BoxGeometry(1, 1, 1);
var material = new THREE.MeshLambertMaterial( { color: 0xcccccc } );
var cubeMesh = new THREE.Mesh(geometry, material);
scene.add(cubeMesh);
*/

</script>
    </body>
</html>

